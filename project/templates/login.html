{% extends "base.html" %}

{% block title %}OurTieba{% endblock %}

{% block page_content %}

    <h1>Login</h1>
    <hr>
    <form action="{{ url_for('api.login_auth') }}" method="post">
        <label for="uname">Username: </label>
        <input name="uname" id="uname" required>
        <label for="password">Password: </label>
        <input type="password" name="password" id="password" required>
        <button id="btn-submit">Log In</button>
    </form>
    <p class="err"></p>
<script>
$("#btn-submit").on("click", () => {
    $.ajax({
        method: "post",
        url: "/api/auth/login",
        dataType: "json",
        data: JSON.stringify({"uname": $("#uname").val(), "password": $("#password").val()}),
        success: (data => {
            $(".err").text(data.error.msg);
        })
    })
})
</script>
{% endblock %}
